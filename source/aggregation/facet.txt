.. _csharp-aggregation-facet:

=====
Facet
=====

.. facet::
   :name: genre
   :values: reference

.. meta::
   :keywords: code example, transform, pipeline

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol


Facet
-----

Use the ``facet()`` method to create a :manual:`$facet </reference/operator/aggregation/facet/>`
pipeline stage that allows for the definition of parallel pipelines.

The following example creates a pipeline stage that executes two parallel aggregations:

- The first aggregation distributes incoming documents into 5 groups according to
  their ``attributes.screen_size`` field.

- The second aggregation counts all *manufacturers* and returns their count, limited
  to the top **5**.

.. literalinclude:: /includes/aggregation/Builders.cs
   :start-after: // begin facet
   :end-before: // end facet
   :language: csharp
   :dedent: