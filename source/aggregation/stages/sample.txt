.. _csharp-aggregation-sample:

======
Sample
======

.. facet::
   :name: genre
   :values: reference

.. meta::
   :keywords: code example, transform, pipeline

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol


Sample
------

Use the ``sample()`` method to create a :manual:`$sample </reference/operator/aggregation/sample/>`
pipeline stage to randomly select documents from input.

The following example creates a pipeline stage that randomly selects 5 documents:

.. literalinclude:: /includes/aggregation/Builders.cs
   :start-after: // begin sample
   :end-before:  // end sample
   :language: csharp
   :dedent:


$sample
~~~~~~~

The ``$sample`` aggregation stage returns a random sample of documents from a 
collection. The following example shows how to generate a ``$sample`` stage by using
LINQ: 

.. code-block:: csharp
   :emphasize-lines: 4

   var query = queryableCollection
       .Aggregate()
       .Sample(4)
       .ToList();

The result of the preceding example contains the following documents:

.. code-block:: json

   // Results Truncated

   { "name" : "Von Dolhens", "cuisine" : "Ice Cream, Gelato, Yogurt, Ices" }
   { "name" : "New York Mercantile Exchange", "cuisine" : "American" }
   { "name" : "Michaelangelo's Restaurant", "cuisine" : "Italian" }
   { "name" : "Charlie Palmer Steak", "cuisine" : "American" }