.. _csharp-aggregation-bucket:

======
Bucket
======

.. facet::
   :name: genre
   :values: reference

.. meta::
   :keywords: dotnet, code example, transform, pipeline, group

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

Overview
--------

Use the ``bucket()`` method to create a :manual:`$bucket </reference/operator/aggregation/bucket/>`
pipeline stage that automates the bucketing of data around predefined boundary
values.

Example
-------

The following example creates a pipeline stage that groups incoming documents based
on the value of their ``screenSize`` field, inclusive of the lower boundary
and exclusive of the upper boundary.

.. literalinclude:: /includes/aggregation/Builders.cs
   :start-after: // begin basicBucket
   :end-before: // end basicBucket
   :language: csharp
   :dedent:

Use the ``BucketOptions`` class to specify a default bucket for values
outside of the specified boundaries, and to specify additional accumulators.

The following example creates a pipeline stage that groups incoming documents based
on the value of their ``screenSize`` field, counting the number of documents
that fall within each bucket, pushing the value of ``screenSize`` into a
field called ``matches``, and capturing any screen sizes greater than "70"
into a bucket called "monster" for monstrously large screen sizes:

.. literalinclude:: /includes/aggregation/Builders.cs
   :start-after: // begin bucketOptions
   :end-before: // end bucketOptions
   :language: csharp
   :dedent:

API Documentation
-----------------

To learn more about the methods and types used on this page, see the following
API documentation:

