.. _csharp-aggregation-sort:

====
Sort
====

.. facet::
   :name: genre
   :values: reference

.. meta::
   :keywords: code example, transform, pipeline

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol


Sort
----

Use the ``sort()`` method to create a  :manual:`$sort </reference/operator/aggregation/sort/>`
pipeline stage to sort by the specified criteria.

.. tip::

   Though the sort criteria can be an instance of any class that
   implements ``Bson``, it's convenient to combine with use of :ref:`Sorts <sorts-builders>`.

The following example creates a pipeline stage that sorts in descending order according
to the value of the ``year`` field and then in ascending order according to the
value of the ``title`` field:

.. literalinclude:: /includes/aggregation/Builders.cs
   :start-after: // begin sortStage
   :end-before: // end sortStage
   :language: csharp
   :dedent:


$sort
~~~~~

The ``$sort`` aggregation stage returns the results of your query in the order
that you specify.

Select the :guilabel:`Method Syntax` or :guilabel:`Query Syntax` tab to see how 
to generate an ``$sort`` stage using LINQ:

.. tabs::

   .. tab:: Method Syntax
      :tabid: method-syntax

      .. code-block:: csharp
         :emphasize-lines: 2

         var query = queryableCollection
             .OrderBy(r => r.Name)
             .ThenByDescending(r => r.RestaurantId);

   .. tab:: Query Syntax
      :tabid: query-syntax

      .. code-block:: csharp
         :emphasize-lines: 2

         var query = from r in queryableCollection
             orderby r.Name, r.RestaurantId descending
             select r;

The preceding example returns the query results sorted alphabetically by the
``Name`` field, with a secondary descending sort on the ``RestaurantId`` field.
The following is a subset of the documents contained in the returned results:

.. code-block:: json

   // Results Truncated

   ...
   { "_id" : ObjectId(...), "name" : "Aba Turkish Restaurant", "restaurant_id" : "41548686", "cuisine" : "Turkish", "address" : {...}, "borough" : "Manhattan", "grades" : [...] }
   { "_id" : ObjectId(...), "name" : "Abace Sushi", "restaurant_id" : "50006214", "cuisine" : "Japanese", "address" : { ... }, "borough" : "Manhattan", "grades" : [...] }
   { "_id" : ObjectId(...), "name" : "Abacky Potluck", "restaurant_id" : "50011222", "cuisine" : "Asian", "address" : { ... }, "borough" : "Manhattan", "grades" : [...] }
   { "_id" : ObjectId(...), "name" : "Abaleh", "restaurant_id" : "50009096", "cuisine" : "Mediterranean", "address" : { ... }, "borough" : "Manhattan", "grades" : [...] }
   ...