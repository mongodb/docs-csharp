.. _csharp-connect-to-mongodb:
.. _csharp-create-mongoclient:

====================
Create a MongoClient
====================

.. facet::
   :name: genre
   :values: reference

.. meta::
   :keywords: connection string, URI, server, Atlas, settings
   :description: Learn how to create a `MongoClient` to connect to a MongoDB deployment using a connection URI and customize connection behavior.

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

This guide shows you how to connect to a MongoDB instance or replica set
deployment by using the {+driver-short+}.

Overview
--------

To connect to a MongoDB deployment, you need two things:

- A **connection URI**, also known as a *connection string*, which tells the {+driver-short+}
  which MongoDB deployment to connect to.
- A **MongoClient** object, which creates the connection to the MongoDB deployment
  and lets you perform operations on it.

You can also use either of these components to customize the way {+driver-short+} behaves
while connected to MongoDB.

This guide shows you how to create a connection URI and use a ``MongoClient`` object
to connect to MongoDB.

Connection URI
--------------

A standard connection URI includes the following components:

.. list-table::
   :widths: 20 80
   :header-rows: 1

   * - Component
     - Description

   * - ``mongodb://``

     - Required. A prefix that identifies this as a string in the
       standard connection format.

   * - ``username:password``

     - Optional. Authentication credentials. If you include these, the client
       authenticates the user against the database specified in ``authSource``.
       For more information about authentication settings, see
       :ref:`csharp-authentication-mechanisms`. 

   * - ``host[:port]``

     - Required. The host and optional port number where MongoDB is running. If you don't
       include the port number, the driver uses the default port, ``27017``.

   * - ``/defaultauthdb``
     
     - Optional. The authentication database to use if the
       connection string includes ``username:password@``
       authentication credentials but not the ``authSource`` option. If you don't include 
       this component, the client authenticates the user against the ``admin`` database.

   * - ``?<options>``

     - Optional. A query string that specifies connection-specific
       options as ``<name>=<value>`` pairs. See
       :ref:`csharp-connection-options` for a full description of
       these options.

For more information about creating a connection string, see
:manual:`Connection Strings </reference/connection-string?tck=docs_driver_csharp>` in the
MongoDB Server documentation.

MongoClient
-----------

To create a connection to MongoDB, pass a connection URI to the
``MongoClient`` constructor. In the following example, the driver uses a sample
connection URI to connect to a MongoDB deployment running on port ``27017`` of ``localhost``:abbreviation:

.. code-block:: csharp

   const string connectionUri = "mongodb://localhost:27017/";
   var client = new MongoClient(connectionUri);

Configuring the MongoClient
---------------------------

You can configure settings for the ``MongoClient`` object by passing a
``MongoClientSettings`` object to the constructor. The following example creates a
``MongoClient`` object and sets the ``UseTls`` property to ``true``:

.. code-block:: csharp

   var mongoClientSettings = MongoClientSettings.FromConnectionString("mongodb://localhost:27017/");
   mongoClientSettings.UseTls = true;
   var client = new MongoClient(mongoClientSettings);

For a full list of the settings you can configure, see the
`MongoClientSettings <{+new-api-root+}/MongoDB.Driver/MongoDB.Driver.MongoClientSettings.html>`_
API documentation.

API Documentation
-----------------

To learn more about creating a ``MongoClient`` object with the {+driver-short+},
see the following API documentation:

- `MongoClient <{+new-api-root+}/MongoDB.Driver/MongoDB.Driver.MongoClient.html>`__
- `MongoClientSettings <{+new-api-root+}/MongoDB.Driver/MongoDB.Driver.MongoClientSettings.html>`__
