.. _csharp-aggregation-group:

=====
Group
=====

.. facet::
   :name: genre
   :values: reference

.. meta::
   :keywords: code example, transform, pipeline

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol


Group
-----

Use the ``group()`` method to create a :manual:`$group </reference/operator/aggregation/group/>`
pipeline stage to group documents by a specified expression and output a document
for each distinct grouping.

.. tip::

   The driver includes the `Accumulators <{+core-api+}/client/model/Accumulators.html>`__
   class with static factory methods for each of the supported accumulators.

The following example creates a pipeline stage that groups documents by the value
of the ``customerId`` field. Each group accumulates the sum and average
of the values of the ``quantity`` field into the ``totalQuantity`` and
``averageQuantity`` fields.

.. literalinclude:: /includes/aggregation/Builders.cs
   :start-after: // begin group
   :end-before: // end group
   :language: csharp
   :dedent:

Learn more about accumulator operators from the Server manual section
on :manual:`Accumulators </reference/operator/aggregation/#std-label-agg-operators-group-accumulators>`.